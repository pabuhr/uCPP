% Remember to use the lgrind style

\File{\1u0\1usystem\1software\1u++\-6.0.0\1src\1examples\1MonConditionBB.cc},{01:40},{Sep 26 2012}
\L{\LB{\C{}\1\1\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\-\*\-\0Mode:\0C++\0\-\*\-\0}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0uC++\0Version\06.0.0,\0Copyright\0(C)\0Peter\0A.\0Buhr\01994}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0MonConditionBB.cc\0\-\-\0Generic\0bounded\0buffer\0problem\0using\0a\0monitor\0and\0condition\0variables}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0Author\0\0\0\0\0\0\0\0\0\0\0:\0Peter\0A.\0Buhr}}
\CE{}\L{\LB{\C{}\1\1\0Created\0On\0\0\0\0\0\0\0:\0Thu\0Aug\0\02\011:35:05\01990}}
\CE{}\L{\LB{\C{}\1\1\0Last\0Modified\0By\0:\0Peter\0A.\0Buhr}}
\CE{}\L{\LB{\C{}\1\1\0Last\0Modified\0On\0:\0Wed\0Nov\030\008:41:43\02005}}
\CE{}\L{\LB{\C{}\1\1\0Update\0Count\0\0\0\0\0:\057}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{}}
\L{\LB{}}
\L{\LB{\K{template}\<\K{typename}\0\V{ELEMTYPE}\>\0\K{\_Monitor}\0\V{BoundedBuffer}\0\{}}
\L{\LB{}\Tab{4}{\K{const}\0\K{int}\0\V{size};}\Tab{56}{\C{}\1\1\0number\0of\0buffer\0elements}}
\CE{}\L{\LB{}\Tab{4}{\K{int}\0\V{front},\0\V{back};}\Tab{56}{\C{}\1\1\0position\0of\0front\0and\0back\0of\0queue}}
\CE{}\L{\LB{}\Tab{4}{\K{int}\0\V{count};}\Tab{56}{\C{}\1\1\0number\0of\0used\0elements\0in\0the\0queue}}
\CE{}\L{\LB{}\Tab{4}{\V{ELEMTYPE}\0\*\V{Elements};}}
\L{\LB{}\Tab{4}{\V{uCondition}\0\V{BufFull},\0\V{BufEmpty};}}
\L{\LB{\0\0\K{public}:}}
\L{\LB{}\Tab{4}{\V{BoundedBuffer}(\0\K{const}\0\K{int}\0\V{size}\0=\010\0)\0:\0\V{size}(\0\V{size}\0)\0\{}}
\L{\LB{}\Tab{8}{\V{front}\0=\0\V{back}\0=\0\V{count}\0=\00;}}
\L{\LB{}\Tab{8}{\V{Elements}\0=\0\K{new}\0\V{ELEMTYPE}[\V{size}];}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0BoundedBuffer::BoundedBuffer}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\~\V{BoundedBuffer}()\0\{}}
\L{\LB{}\Tab{8}{\K{delete}\0[\,]\0\V{Elements};}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0BoundedBuffer::\~BoundedBuffer}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\K{\_Nomutex}\0\K{int}\0\V{query}()\0\{}}
\L{\LB{}\Tab{8}{\K{return}\0\V{count};}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0BoundedBuffer::query}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\K{void}\0\V{insert}(\0\V{ELEMTYPE}\0\V{elem}\0)\0\{}}
\L{\LB{}\Tab{8}{\K{if}\0(\0\V{count}\0==\0\V{size}\0)\0\{}}
\L{\LB{}\Tab{12}{\V{BufFull}.\V{wait}();}}
\L{\LB{}\Tab{8}{\}\0\C{}\1\1\0if}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{8}{\V{Elements}[\V{back}]\0=\0\V{elem};}}
\L{\LB{}\Tab{8}{\V{back}\0=\0(\0\V{back}\0+\01\0)\0\%\0\V{size};}}
\L{\LB{}\Tab{8}{\V{count}\0+=\01;}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\V{BufEmpty}.\V{signal}();}}
\L{\LB{}\Tab{4}{\};\0\C{}\1\1\0BoundedBuffer::insert}}
\CE{}\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\V{ELEMTYPE}\0\V{remove}()\0\{}}
\L{\LB{}\Tab{8}{\V{ELEMTYPE}\0\V{elem};}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\K{if}\0(\0\V{count}\0==\00\0)\0\{}}
\L{\LB{}\Tab{12}{\V{BufEmpty}.\V{wait}();}}
\L{\LB{}\Tab{8}{\}\0\C{}\1\1\0if}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{8}{\V{elem}\0=\0\V{Elements}[\V{front}];}}
\L{\LB{}\Tab{8}{\V{front}\0=\0(\0\V{front}\0+\01\0)\0\%\0\V{size};}}
\L{\LB{}\Tab{8}{\V{count}\0\-=\01;}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\V{BufFull}.\V{signal}();}}
\L{\LB{}\Tab{8}{\K{return}\0\V{elem};}}
\L{\LB{}\Tab{4}{\};\0\C{}\1\1\0BoundedBuffer::remove}}
\CE{}\L{\LB{\};\0\C{}\1\1\0BoundedBuffer}}
\CE{}\L{\LB{}}
\L{\LB{\K{\#include}\0\S{}\"ProdConsDriver.i\"\SE{}}}
\L{\LB{}}
\L{\LB{\C{}\1\1\0Local\0Variables:\0\1\1}}
\CE{}\L{\LB{\C{}\1\1\0tab\-width:\04\0\1\1}}
\CE{}\L{\LB{\C{}\1\1\0compile\-command:\0\"u++\0MonConditionBB.cc\"\0\1\1}}
\CE{}\L{\LB{\C{}\1\1\0End:\0\1\1}}
\CE{}